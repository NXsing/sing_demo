# Simple interactive novel generator. Demo

## Запуск демки
1. Скачать(верхний правый угол страницы, зеленая кнопка)
2. Запустить index.html

Основной исходник - это `main.py`.

## Базовый проект, для начала
https://github.com/NXsing/sing_basic

## Об API

Питоновые функции движка:
```python
r([название комнаты]) # начало блока комнаты
t(текст, [условие], [команда]) # текст
a(текст, команда, [условие]) # действие
e() # заверешние блока комнаты
```
Как видите, движок очень прост.

Есть еще "умная" функция `x(текст, [команда/условие])`, которая сама, на основе формата аргументов, вызывает t() или a(). Это позволяет писать код побыстрее.

## Условия, команды

Основные:
```python
a("Взять книгу","set BOOK","ifset BOOK")
a("Взять книгу","unset BOOK","ifnot BOOK")
a("Идти дальше","goto комната2")
```

Можно комбинировать через ";":
```python
a("Взять книгу","set BOOK;unset HANDFREE;goto room4","ifset BOOK;ifnot VISITED4")
```

Алиасы:
```python
a("Идти дальше","next")
a("Идти дальше","return")
```

## О движке

Питоновые функции(r,t,a,e) генерируют структуры, которые потом конвертируются в байт-код.

Байт-код потом интерпретируется в браузере, используя javascript.

Можно реализовать интерпретатор байт-кода и на любой-другой платформе(всего 15 инструкций). Сам байт-код(пока что) сохраняется в два файла: _bytes.js и bytes.pick

Файл bytes.pick можно импортировать в Питоне:
```python
import pickle
mem=pickle.load( open( "SOURCE/_bytes.pick", "rb" ) ) # байт-код прочитан
```

## Уникальные возмножности

1. Возможность вставки тегов html, включая iframe(т.е. можно вставлять видео с youtube), img в t()
2. Возможность добавления доп.функционала на js, путем вставки тега <script>j++</script>, что позволяет, напр. изменить переменную или вызвать функцию при посещении комнаты. Для вызова кода на js, при выборе действия, есть команда "mes <script>j++</script>"(внутри без ковычек - сразу тег)
3. Можно загрузить видео с youtube фоново(тогда оно используется в качестве источника только звука). В index.html это следующая строка:
```html
<iframe src="https://www.youtube.com/embed/w2f4YsKGUDo?autoplay=1&mute=0&volume=100&showinfo=0" width="1" height="1" frameborder="0" allowfullscreen></iframe>
```
Строка `?autoplay=1&mute=0&volume=100&showinfo=0` дбавлена как раз для автопроигрывания. `width="1" height="1"` делают видео размером с 1 пиксель(невидимым на странице). Идентификатор `w2f4YsKGUDo` отвечает за адрес ролика - именно его и нужно менять для смены звукового ряда.

4. Возможность использования веб-шрифтов(напр. google fonts). Их использование описано на https://fonts.google.com/, но как правило это подключение стиля:```<link href="https://fonts.googleapis.com/css?family=Nanum+Pen+Script" rel="stylesheet">``` и указание стиля: ```<h1 style="font-family: 'Nanum Pen Script', cursive"><i>Hello world!</i></h1>```.

## Контакты для связи

1. Почта: x_n хатико) ro.ru
2. NX на Discord-канале ifrus: https://discordapp.com/invite/X86kkzM
